# 10장 상속과 코드 재사용

## 스터디 날짜
2022/01/31

## 1. 상속과 중복 코드
### DRY 원칙 : Don't Repeat Yourself(반복하지 마라)
=한 번, 단 한번(Once and Only Once) 원칙 = 단일 지점 제어(Single-Point Control)<br>

중복을 바꾸는 과정
1.Phone, NightlyDiscountPhone 클래스를 따로 구현한다. - 중복되는 코드가 굉장히 많다.<br>
2.Enum 타입을 사용한다. - 클래스가 낮은 응집도와 높은 결합도를 가진다, 단일 책임 원칙에서 벗어난다.<br>
3.상속을 통해 중복 코드 제거 - 중복코드는 제거되지만 클래스간의 결합도가 무지막지하게 증가하여 수정에 불리하다.<br>

## 2. 취약한 기반 클래스 문제 
취약한 기반 클래스 문제 : 상속 관계로 연결된 자식 클래스가 부모 클래스의 변경에 취약해지는 현상<br>

### 상속을 위한 경고 1
**자식 클래스의 메서드 안에서 super 참조를 이용해 부모 클래스의 메서드를 직접 호출할 경우 두 클래스는 강하게 결합된다. super 호출을 제거할 수 있는 방법을 찾아 결합도를 제거하라.**<br>
부모 클래스에 대한 지식을 요구하여 캡슐화가 깨진다.

### 상속을 위한 경고2
**상속받은 부모 클래스의 메서드가 자식 클래스의 내부 구조에 대한 규칙을 깨트릴 수 있다**<br>
자식클래스에서 선언하지 않았지만 부모클래스에서 선언된 메서드가 사용될수 있다.

### 상속을 위한 경고3
**자식 클래스가 부모 클래스의 메서드를 오버라이딩할 경우 부모 클래스가 자신의 메서드를 사용하는 방법에 자식 클래스가 결합될 수 있다.**<br>
super 을 통해 선언한 메서드 내부에서 부모 클래스에서 overriding 한 메서드가 아닌 부모클래스 메서드가 호출 될 수 있다.

### 상속을 위한 경고4
**클래스를 상속하면 결합도로 인해 자식 클래스와 부모 클래스의 구현을 영원히 변경하지 않거나, 자식 클래스와 부모 클래스를 동시에 변경하거나 중 중 하나를 선택할 수밖에 없다.**<br>
상속은 부모 클래스에대한 구현을 알아야 하게 만들며, 이는 높은 결합도로 인해 함께 수정해야 하는 상황으로 이끈다.

## 3. 추상화에 의존하자
- 두 메서드가 유사하게 보인다면 차이점을 메서드로 추출하라. 
- 자식 클래스의 추상적인 메서드를 부모 클래스로 올리는 것이 재사용성과 응집도 측면에서 더뛰어난 결과를 얻을 수 있다.<br>

**변하는 것으로부터 변하지 않는 것을 분리하라, 변하는 부분을 찾고 이를 캡슐화하라**<br>

공통 부분을 부모 클래스로 이동시카자(메서드 추출)<br>
-><br>
추상 메서드로 선언하고 자식 클래스에서 오버라이딩할 수 있도록 protected 로 선언하자<br>

### 추상화가 핵심이다
- 자식 클래스는 추상화에만 의존한다
- 의존성 역전 원칙도 준수한다.(추상화에 의존)
- 개방-폐쇄 원칙 준수(추상 메서드만 오버라이딩 하여 추가하면 된다. 변하지 않는 부분은 추상 클래스에 공통적으로 구현되어있다)

### 인스턴스 변수가 추가되는 경우
자식 클래스는 자신의 인스턴스를 생성할 떄 부모 클래스에 정의된 인스턴스 변수를 초기화 해야한다.<br>
하지만 인스턴스 초기화 로직을 변경하는 것이 두 클래스에 동일한 계산 코드를 중복시키는 것보다 현명하다.<br>
**객체 생성 로직의 변경에 유연하게 대응 할 수 있는 다양한 방법이 존재한다 - Factory, AppConfig**<br>
<br>
차이에 의한 프로그래밍(programming by difference) : 기존 코드와 다른 부분만을 추가함으로써 애플리케이션의 기능을 확장<br>
합성 : 다음 시간에 공부해보자

