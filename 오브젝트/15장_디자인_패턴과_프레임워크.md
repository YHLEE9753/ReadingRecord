# 15장 디자인 패턴과 프레임워크

## 스터디 날짜
2022/02/17

디자인 패턴 : 소프트웨어 설계에서 반복적으로 발생하는 문제에 대해 반복적으로 적용할 수 있는 해결 방법<br>
프레임워크 : 설계와 코드를 함께 재사용하기 위한 것. 애플리케이션의 아키텍처를 구현 코드의 형태로 제공한다.<br>

## 1. 디자인 패턴과 설계 재사용
## 패턴 종류
### 아키텍처 패턴(Architecture Pattern)
소프트웨어의 전체적인 구조를 결정하기 위해 사용된다. 미리 정의된 서브시스템을 제공하고, 각 서브시스템들의 책임을 정의하며, 서브시스템들 사이의 관계를 조직화하는 규칙과 가이드라인을 포함한다.<br><br>
*프로그래밍 언어나 프로그래밍 패러다임에 독립적이다.*
### 디자인 패턴(Design Pattern)
특정 정황 내에서 일반적인 설계 문제를 해결하며, 협력하는 컴포넌트들 사이에서 반복적으로 발생하는 구조를 서술한다.<br><br>
*프로그래밍 언어나 프로그래밍 패러다임에 독립적이다.*
### 이디엄(Idiom)
특정 프로그래밍 언어에만 국한된 하위 레벨 패턴
### 분석 패턴(Analysis Pattern)
기술적인 문제보다는 도메인 내의 개념적인 문제를 해결하는 데 초점을 맞춘다. 업무 모델링 시에 발견되는 공통적인 구조를 표현하는 개념들의 집합이다.
<br><br>
## 패턴과 책임-주도 설계
- 패턴은 공통으로 사용할 수 있는 역할, 책임, 협력의 템플릿이다.
- 패턴을 따르면 특정한 상황에 적용할 수 있는 설계를 빠르게 떠올릴 수 있다.
- **패턴의 구성 요소는 클래스가 아니라 '역할' 이다.**
- 명확한 트레이드오프 없이 패턴을 남용하면 설계가 불필요하게 복잡해진다.
- 패턴을 복잡성의 가치가 단순성을 넘어설 때만 정당화되어야 한다.
- 패턴은 출발점이다. 문제를 분석하고 패턴을 현재에 문제에 적합하도록 적절히 수정하라

## 디자인 패턴의 종류
### COMPOSITE 패턴
15장_디자인_패턴과_프레임워크_COMPOSITE패턴.md 참고
### STRATEGY 패턴
객체들이 할 수 있는 행위 각각에 대해 전략 클래스를 생성하고, 유사한 행위들을 캡슐화 하는 인터페이스를 정의하여, 객체의 행위를 동적으로 바꾸고 싶은 경우 직접 행위를 수정하지 않고 전략을 바꿔주기만 함으로써 행위를 유연하게 확장하는 방법을 말합니다.<br>
쉽게 말해 알고리즘의 변경을 캡슐화하는 것이고 이를 구현하기 위해 객체 합성을 이용한다.


### TEMPLATE METHOD 패턴
알고리즘 캡슐화를 하기 위해 합성 관계가 아닌 상속 관계를 사용하는 것<br>
STRATEGY 패턴처럼 런타임에 객체의 알고리즘을 변경하는 것은 불가능하다.<br>
하지만 알고리즘 교체와 같은 요구사항이 없다면 상대적으로 복잡도를 낮출 수 있다.<br>

### DECORATOR 패턴
객체의 행동을 동적으로 추가할 수 있게 해주는 패턴으로 객체의 행동을 결합하기 위해 객체 합성을 사용한다.<br>

<그림1>


## 2. 프레임워크와 코드 재사용
프레임워크 : 추상 클래스나 인터페이스를 정의하고 인스턴스 사이의 상호작용을 통해 시스템 전체 혹은 일부를 구현해 놓은 재사용 가능한 설계<br>
애플리케이션 개발자가 현재의 요구사항에 맞게 커스터마이징할 수 있는 애플리케이션의 골격
<br><br>
- 상위 정책은 세부 사항에 비해 재사용될 가능성이 높다.
- 상위 정책과 세부 사항 모두 추상화에 의존하게 만들어야 한다.
- 변하는 것과 변하지 않는 것을 서로 분리해야한다.
- 변하는 것과 변하지 않는 부분을 별도의 패키지로 분리해야 한다.


<그림2>

위 그림에서 상위 정책으로 구성된 패키지가 별도의 배포 단위로 분리된 프레임워크가 될 수 있따.

### 제어 역전 원리
의존성 역전 원리에 의해 상위 정책에 의존하게 된다.<br>
의존성 역전이 바로 객체지향 설계를 의미한다.<br>
제어 역전(Inversion of Control) = 할리우드(Hollywood) 원리 = 의존성을 역전시키면 제어 흐름의 주체역시 역전된다.<br>
훅(Hook) = 안성되지 않은 채로 남겨진 동작 : 훅의 구현 방식은 애플리케이션의 컨텍스트에 따라 달라진다.<br>
<br>
재정의된 훅은 제어 역전 원리에 따라 프레임워크가 원하는 시점에 호출된다.<br>
**협력을 제어하는 것은 프레임워크이다.**